{% extends 'main/base.html' %}
{% load static %}
{% block title %}All Plants - Planteer{% endblock %}

{% block content %}

<h1 class="page-title">All Plants</h1>

{# NEW: واجهة المستخدم للفلاتر (Category, Edible, Country) #}
<div class="filter-box-page">
    <form class="filter-form" method="get">
        
        <select name="category" onchange="this.form.submit()">
            <option value="">All Categories</option>
            {% for value, label in categories %}
                <option value="{{ value }}" 
                        {% if selected_category == value %}selected{% endif %}>
                    {{ label }}
                </option>
            {% endfor %}
        </select>

        <select name="is_edible" onchange="this.form.submit()">
            <option value="">Edibility</option>
            <option value="true" {% if selected_is_edible == 'true' %}selected{% endif %}>Edible</option>
            <option value="false" {% if selected_is_edible == 'false' %}selected{% endif %}>Non-Edible</option>
        </select>
        
        <select name="country" onchange="this.form.submit()">
            <option value="">All Countries (Native)</option>
            {% for country in countries %}
                <option value="{{ country.id }}" 
                        {% if selected_country_id|stringformat:"i" == country.id|stringformat:"i" %}selected{% endif %}>
                    {{ country.name }}
                </option>
            {% endfor %}
        </select>

    </form>
</div>
{# END Filter UI #}


<div class="plants-grid">
    {% for plant in plants %}
        {# UPDATED: استخدام الـ Include #}
        {% include 'plants/_plant_card.html' with plant=plant %}
    {% empty %}
        <p>No plants found.</p>
    {% endfor %}
</div>

{% endblock %}